
## 基础

1. 使用`git clone https://github.com/Eynzof/ac3-cybersecurity-wiki.git` 将项目克隆到本地，一般我们放在/Documents

2. 这个项目主要依赖`cmake`，关键的指令都在根目录的`Makefile`文件里。

3. 这个项目要在windows上运行比较麻烦，因为没有提供默认的make选项，我之前似乎调试过能在windows上使用，但是我已经忘了，这是一个大问题。如果想不起来就只能在本地启动ubuntu虚拟机了。

4. 在我的vmware里面有一个叫做hugo-obsidian的虚拟机，这是用来专门调试博客的。我建议读者也创建一个虚拟机用于调试和编译此项目。



## 关于配置Ubuntu虚拟机的环境

1. ubuntu默认是没有装go的，所以第一步我们来安装go，这个项目要求go > 1.16

`sudo snap install go --classic`

安装完成之后使用`go version` 看一下



2. 安装hugo

`sudo apt install hugo`



3. 安装hugo-obsidian，它是go的一个库

`go install github.com/jackyzha0/hugo-obsidian@latest`



4. 安装make，ubuntu不能直接使用make我比较意外

`sudo apt install make`



5. 输入`make help`测试一下，看来应该是这样的

   ![image.png](notes/images/如何使用AC3-KnowledgeBase-assets/image.png)



6. 输入`make update` 更新一下quartz的版本，不要更新了，它会把mermaid的bug重新带回来

7. 这时如果直接输入`make serve`会报错

```bash
enzo@enzo-virtual-machine:~/Documents/ac3-cybersecurity-wiki$ make serve
hugo-obsidian -input=content -output=assets/indices -index -root=.
make: hugo-obsidian: No such file or directory
make: *** [Makefile:20: serve] Error 127
```

这是一个老生常谈的问题，hugo-obsidian安装了，但是没有被当前目录找到，这涉及到go的PATH问题

8. 看一下go安装在哪里了

```bash
whereis go
```

考虑到不同的安装方法，go的位置也会不一样，对于使用snap指令安装的go，它的默认路径位于`/snap/bin`

9. 看一下hugo-obsidian的安装位置

应该位于/用户名/bin/go这里，例如`/home/enzo/go/bin`

10. 修改PATH，我采用临时修改的方法，直接在cmd里输入`export PATH="$PATH:/home/enzo/go/bin"`

11. 测试`whereis hugo-obsidian`

12. `make serve` 启动服务



## 关于在Ubuntu中安装Obsidian

1. 我们使用obsidian来编辑md源文件，对于ubuntu，我们去obsidian的官网下载deb安装包进行安装

2. open as vault，打开ac3-cybersecurity-wiki的content文件夹

3. 打开obsidian的设置，打开About栏，将语言切换为简体中文



![image 1.png](notes/images/如何使用AC3-KnowledgeBase-assets/image%201.png)

改这几个设置，修改到上图这种状态





## 关于更新内容并上传到github

要在ubuntu虚拟机中配置好 keys ，获得对此项目的编辑许可，Git的工作流遵循 Git flow 的规范。
所有的变更应当位于develop分支上，经过审核后合并至main分支。





## 项目结构及工作流

使用 `hugo` 指令会将markdown文件编译为一系列浏览器能接受的html，其中的双向链接会变为超链接，此时产出的文件位于/public文件夹中，可以采用任何一种http server发布内容服务。
那么，此知识库的工作流就是使用 obsidian 编辑 markdown 格式的源文件，然后使用 hugo-obsidian 将其转换为静态内容网页，最后进行内容发布。



## 存在的BUG

### 最后编辑于 Unknown

![[notes/images/Pasted image 20230905124758.png]]

### 更新quartz之后mermaid的bug又会出现，原理还是不太明确

```bash
enzo@enzo-virtual-machine:~/Documents/ac3-cybersecurity-wiki$ make serve
hugo-obsidian -input=content -output=assets/indices -index -root=.
Scraping content
[Parsing note] /_index => found: 19 links
[Parsing note] /notes/Hacknet => found: 0 links
[Parsing note] /notes/Introducing Pentesting/Hack The Box => found: 1 links
[Parsing note] /notes/Introducing Pentesting/Parrot Security => found: 0 links
[Parsing note] /notes/Introducing Pentesting/Shell 的种类 Type of Shell => found: 2 links
[Parsing note] /notes/Introducing Pentesting/保持井井有条 Stay Organized => found: 7 links
[Parsing note] /notes/Introducing Pentesting/信息安全概述 InfoSec Overview => found: 2 links
[Parsing note] /notes/Introducing Pentesting/公开漏洞利用 Public Exploit => found: 4 links
[Parsing note] /notes/Introducing Pentesting/安装渗透测试系统 Getting Started with a Pentest Distro => found: 14 links
[Parsing note] /notes/Introducing Pentesting/常用工具 Common Tools => found: 9 links
[Parsing note] /notes/Introducing Pentesting/常用术语 Common Terms => found: 25 links
[Parsing note] /notes/Introducing Pentesting/提权 Privilege Escalation => found: 16 links
[Parsing note] /notes/Introducing Pentesting/文件传输 File Transferring => found: 4 links
[Parsing note] /notes/Introducing Pentesting/服务扫描 Service Scanning => found: 0 links
[Parsing note] /notes/Introducing Pentesting/渗透测试入门 Introducing Pentest => found: 1 links
[Parsing note] /notes/Introducing Pentesting/网络枚举 Web Enumeration => found: 6 links
[Parsing note] /notes/Leet写法 => found: 0 links
[Parsing note] /notes/Writeup => found: 0 links
[Parsing note] /notes/任务 - Hacknet => found: 4 links
[Parsing note] /notes/渗透测试入门-指令集 => found: 0 links
[Parsing note] /notes/配置 FAQ => found: 0 links
[Ignored] private-note.md
[Ignored] post.md
[DONE] in 5ms
Ignored 2 private files 
Parsed 114 total links 
Removed 95 external and non-markdown links
hugo server --enableGitInfo --minify --bind=0.0.0.0 --baseURL=http://localhost --port=1313 --appendPort=true --liveReloadPort=-1
Start building sites … 
hugo v0.92.2+extended linux/amd64 BuildDate=2023-01-31T11:11:57Z VendorInfo=ubuntu:0.92.2-1ubuntu0.1
ERROR 2023/09/05 12:22:06 render of "page" failed: execute of template failed: template: _default/single.html:3:3: executing "_default/single.html" at <partial "head.html" .>: error calling partial: execute of template failed: template: partials/head.html:72:4: executing "partials/head.html" at <partial "mermaid.html" .>: error calling partial: "/home/enzo/Documents/ac3-cybersecurity-wiki/layouts/partials/mermaid.html:2:13": execute of template failed: template: partials/mermaid.html:2:13: executing "partials/mermaid.html" at <.Page.Store.Get>: can't evaluate field Store in type page.Page
ERROR 2023/09/05 12:22:06 render of "page" failed: execute of template failed: template: _default/single.html:3:3: executing "_default/single.html" at <partial "head.html" .>: error calling partial: execute of template failed: template: partials/head.html:72:4: executing "partials/head.html" at <partial "mermaid.html" .>: error calling partial: "/home/enzo/Documents/ac3-cybersecurity-wiki/layouts/partials/mermaid.html:2:13": execute of template failed: template: partials/mermaid.html:2:13: executing "partials/mermaid.html" at <.Page.Store.Get>: can't evaluate field Store in type page.Page
ERROR 2023/09/05 12:22:06 render of "page" failed: execute of template failed: template: _default/single.html:3:3: executing "_default/single.html" at <partial "head.html" .>: error calling partial: execute of template failed: template: partials/head.html:72:4: executing "partials/head.html" at <partial "mermaid.html" .>: error calling partial: "/home/enzo/Documents/ac3-cybersecurity-wiki/layouts/partials/mermaid.html:2:13": execute of template failed: template: partials/mermaid.html:2:13: executing "partials/mermaid.html" at <.Page.Store.Get>: can't evaluate field Store in type page.Page
ERROR 2023/09/05 12:22:06 render of "page" failed: execute of template failed: template: _default/single.html:3:3: executing "_default/single.html" at <partial "head.html" .>: error calling partial: execute of template failed: template: partials/head.html:72:4: executing "partials/head.html" at <partial "mermaid.html" .>: error calling partial: "/home/enzo/Documents/ac3-cybersecurity-wiki/layouts/partials/mermaid.html:2:13": execute of template failed: template: partials/mermaid.html:2:13: executing "partials/mermaid.html" at <.Page.Store.Get>: can't evaluate field Store in type page.Page
Error: Error building site: failed to render pages: render of "page" failed: execute of template failed: template: _default/single.html:3:3: executing "_default/single.html" at <partial "head.html" .>: error calling partial: execute of template failed: template: partials/head.html:72:4: executing "partials/head.html" at <partial "mermaid.html" .>: error calling partial: "/home/enzo/Documents/ac3-cybersecurity-wiki/layouts/partials/mermaid.html:2:13": execute of template failed: template: partials/mermaid.html:2:13: executing "partials/mermaid.html" at <.Page.Store.Get>: can't evaluate field Store in type page.Page
Built in 44 ms
make: *** [Makefile:21: serve] Error 255
```
